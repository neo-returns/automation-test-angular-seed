machine:
  services:
    - docker

dependencies:
  override:
    - docker info
    - docker build -t neoreturns/automation-test-angular-seed .

test:
  override:
    - docker run --name=testbox -d -p 8000:8000 neoreturns/automation-test-angular-seed; sleep 10; npm test
  post:
     - docker cp testbox:/automation-test-angular-seed/coverage /$CIRCLE_ARTIFACTS/coverage
  
deployment:     
  hub: 
    branch: master
    commands:
      - docker login -e="ptaylor@medullan.com" -p="Futurtech123" -u="neoreturns"
      - docker push neoreturns/automation-test-angular-seed
      
deployment:
  staging:
    branch: master
    heroku:
      appname: automation-test-angular-seed
      
general : 
  artifacts : 
    -  "~/coverage"